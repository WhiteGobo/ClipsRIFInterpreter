@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rif: <http://www.w3.org/2007/rif#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

[] a rif:Document ;
    rif:payload [ a rif:Group ;
            rif:sentences ( [ a rif:Forall ;
                        rif:formula [ a rif:Implies ;
                                rif:if [ a rif:And ;
                                        rif:formulas ( [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "defrule" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://example.com/transfer-bound-variables-from"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "constraint" ] ] ) ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "constrant" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://example.com/binds-variable"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "var" ] ] ) ] ) ] ;
                                rif:then [ a rif:Do ;
                                        rif:actions ( [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "defrule" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://example.com/bound-variable"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Var ;
                                                                                rif:varname "var" ] ] ) ] ] ) ] ] ;
                        rif:vars ( [ a rif:Var ;
                                    rif:varname "constraint" ] [ a rif:Var ;
                                    rif:varname "defrule" ] [ a rif:Var ;
                                    rif:varname "var" ] ) ] [ a rif:Forall ;
                        rif:formula [ a rif:Implies ;
                                rif:if [ a rif:And ;
                                        rif:formulas ( [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "rifexternal" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Const ;
                                                                        rif:constIRI "http://www.w3.org/2007/rif#External"^^xsd:anyURI ] ] ) ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "rifexternal" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://www.w3.org/2007/rif#content"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "content" ] ] ) ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "content" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://www.w3.org/2007/rif#op"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "rifop" ] ] ) ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "rifop" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://example.com/as-expression"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "functionsymbol" ] ] ) ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "functionsymbol" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://clips.script/symbol"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "functionname" ] ] ) ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "content" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://www.w3.org/2007/rif#args"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "rifarglist" ] ] ) ] [ a rif:External ;
                                                    rif:content [ a rif:Atom ;
                                                            rif:args ( [ a rif:Var ;
                                                                        rif:varname "rifarglist" ] ) ;
                                                            rif:op [ a rif:Const ;
                                                                    rif:constIRI "http://www.w3.org/2007/rif-builtin-predicate#is-list"^^xsd:anyURI ] ] ] ) ] ;
                                rif:then [ a rif:Do ;
                                        rif:actionVar ( [ a rif:Var ;
                                                    rif:varname "function" ] [ a rif:New ] ) ;
                                        rif:actions ( [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "rifexternal" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://example.com/as-action"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Var ;
                                                                                rif:varname "function" ] ] ) ] ] [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "rifexternal" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://example.com/as-expression"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Var ;
                                                                                rif:varname "function" ] ] ) ] ] [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "function" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/function-name"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Var ;
                                                                                rif:varname "functionname" ] ] ) ] ] [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "function" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/function-args"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:External ;
                                                                                rif:content [ a rif:Expr ;
                                                                                        rif:args () ;
                                                                                        rif:op [ a rif:Const ;
                                                                                                rif:constIRI "http://www.w3.org/2007/rif-builtin-function#make-list"^^xsd:anyURI ] ] ] ] ) ] ] [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "function" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://example.com/add-args-from"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Var ;
                                                                                rif:varname "rifarglist" ] ] ) ] ] ) ] ] ;
                        rif:vars ( [ a rif:Var ;
                                    rif:varname "content" ] [ a rif:Var ;
                                    rif:varname "rifop" ] [ a rif:Var ;
                                    rif:varname "rifarglist" ] [ a rif:Var ;
                                    rif:varname "functionname" ] [ a rif:Var ;
                                    rif:varname "functionsymbol" ] ) ] [ a rif:Forall ;
                        rif:formula [ a rif:Implies ;
                                rif:if [ a rif:And ;
                                        rif:formulas ( [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "function" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://example.com/add-args-from"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "rifarglist" ] ] ) ] [ a rif:External ;
                                                    rif:content [ a rif:Atom ;
                                                            rif:args ( [ a rif:Var ;
                                                                        rif:varname "rifarglist" ] ) ;
                                                            rif:op [ a rif:Const ;
                                                                    rif:constIRI "http://www.w3.org/2007/rif-builtin-predicate#is-list"^^xsd:anyURI ] ] ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "firstarg" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://example.com/as-expression"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "clipsexpression" ] ] ) ] [ a rif:Equal ;
                                                    rif:left [ a rif:Var ;
                                                            rif:varname "firstarg" ] ;
                                                    rif:right [ a rif:External ;
                                                            rif:content [ a rif:Expr ;
                                                                    rif:args ( [ a rif:Var ;
                                                                                rif:varname "rifarglist" ] [ a rif:Const ;
                                                                                rif:value 0 ] ) ;
                                                                    rif:op [ a rif:Const ;
                                                                            rif:constIRI "http://www.w3.org/2007/rif-builtin-function#get"^^xsd:anyURI ] ] ] ] ) ] ;
                                rif:then [ a rif:Do ;
                                        rif:actionVar ( [ a rif:Var ;
                                                    rif:varname "functionargs" ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "function" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://clips.script/function-args"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "functionargs" ] ] ) ] ) ;
                                        rif:actions ( [ a rif:Modify ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "function" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/function-args"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:External ;
                                                                                rif:content [ a rif:Expr ;
                                                                                        rif:args ( [ a rif:Var ;
                                                                                                    rif:varname "functionargs" ] [ a rif:Var ;
                                                                                                    rif:varname "clipsexpression" ] ) ;
                                                                                        rif:op [ a rif:Const ;
                                                                                                rif:constIRI "http://www.w3.org/2007/rif-builtin-function#append"^^xsd:anyURI ] ] ] ] ) ] ] [ a rif:Modify ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "function" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://example.com/add-args-from"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:External ;
                                                                                rif:content [ a rif:Expr ;
                                                                                        rif:args ( [ a rif:Var ;
                                                                                                    rif:varname "rifarglist" ] [ a rif:Const ;
                                                                                                    rif:value 0 ] ) ;
                                                                                        rif:op [ a rif:Const ;
                                                                                                rif:constIRI "http://www.w3.org/2007/rif-builtin-function#remove"^^xsd:anyURI ] ] ] ] ) ] ] ) ] ] ;
                        rif:vars ( [ a rif:Var ;
                                    rif:varname "function" ] [ a rif:Var ;
                                    rif:varname "rifarglist" ] [ a rif:Var ;
                                    rif:varname "firstarg" ] ) ] [ a rif:Forall ;
                        rif:formula [ a rif:Implies ;
                                rif:if [ a rif:And ;
                                        rif:formulas ( [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "rifexternal" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://example.com/add-as-pattern"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "defrule" ] ] ) ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "rifexternal" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Const ;
                                                                        rif:constIRI "http://www.w3.org/2007/rif#External"^^xsd:anyURI ] ] ) ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "rifexternal" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://example.com/as-action"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "action" ] ] ) ] [ a rif:INeg ;
                                                    rif:formula [ a rif:Exists ;
                                                            rif:formula [ a rif:Frame ;
                                                                    rif:object [ a rif:Var ;
                                                                            rif:varname "action" ] ;
                                                                    rif:slots ( [ a rif:Slot ;
                                                                                rif:slotkey [ a rif:Const ;
                                                                                        rif:constIRI "http://example.com/needs-variable"^^xsd:anyURI ] ;
                                                                                rif:slotvalue [ a rif:Var ;
                                                                                        rif:varname "var" ] ] ) ] ;
                                                            rif:vars ( [ a rif:Var ;
                                                                        rif:varname "var" ] ) ] ] ) ] ;
                                rif:then [ a rif:Do ;
                                        rif:actionVar ( [ a rif:Var ;
                                                    rif:varname "oldpatternlist" ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "defrule" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://clips.script/conditional-element"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "oldpatternlist" ] ] ) ] ),
                                            ( [ a rif:Var ;
                                                    rif:varname "pattern" ] [ a rif:New ] ) ;
                                        rif:actions ( [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "pattern" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/TestCE"^^xsd:anyURI ] ] ) ] ] [ a rif:Modify ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "defrule" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/conditional-element"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:External ;
                                                                                rif:content [ a rif:Expr ;
                                                                                        rif:args ( [ a rif:Var ;
                                                                                                    rif:varname "oldpatternlist" ] [ a rif:Var ;
                                                                                                    rif:varname "pattern" ] ) ;
                                                                                        rif:op [ a rif:Const ;
                                                                                                rif:constIRI "http://www.w3.org/2007/rif-builtin-function#append"^^xsd:anyURI ] ] ] ] ) ] ] [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "pattern" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/function-call"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Var ;
                                                                                rif:varname "action" ] ] ) ] ] ) ] ] ;
                        rif:vars ( [ a rif:Var ;
                                    rif:varname "rifexternal" ] [ a rif:Var ;
                                    rif:varname "action" ] [ a rif:Var ;
                                    rif:varname "defrule" ] ) ] [ a rif:Forall ;
                        rif:formula [ a rif:Implies ;
                                rif:if [ a rif:And ;
                                        rif:formulas ( [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "rifequal" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://example.com/add-as-pattern"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "defrule" ] ] ) ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "rifequal" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://www.w3.org/2007/rif#left"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "left" ] ] ) ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "rifequal" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://www.w3.org/2007/rif#right"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "right" ] ] ) ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "left" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://example.com/as-expression"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "leftexpr" ] ] ) ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "right" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://example.com/as-expression"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "rightexpr" ] ] ) ] ) ] ;
                                rif:then [ a rif:Do ;
                                        rif:actionVar ( [ a rif:Var ;
                                                    rif:varname "oldpatternlist" ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "defrule" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://clips.script/conditional-element"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "oldpatternlist" ] ] ) ] ),
                                            ( [ a rif:Var ;
                                                    rif:varname "pattern" ] [ a rif:New ] ),
                                            ( [ a rif:Var ;
                                                    rif:varname "action" ] [ a rif:New ] ) ;
                                        rif:actions ( [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "pattern" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/TestCE"^^xsd:anyURI ] ] ) ] ] [ a rif:Modify ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "defrule" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/conditional-element"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:External ;
                                                                                rif:content [ a rif:Expr ;
                                                                                        rif:args ( [ a rif:Var ;
                                                                                                    rif:varname "oldpatternlist" ] [ a rif:Var ;
                                                                                                    rif:varname "pattern" ] ) ;
                                                                                        rif:op [ a rif:Const ;
                                                                                                rif:constIRI "http://www.w3.org/2007/rif-builtin-function#append"^^xsd:anyURI ] ] ] ] ) ] ] [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "pattern" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/function-call"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Var ;
                                                                                rif:varname "action" ] ] ) ] ] [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "action" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/function-name"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Const ;
                                                                                rif:value "eq"^^xsd:string ] ] ) ] ] [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "action" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/function-args"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:External ;
                                                                                rif:content [ a rif:Expr ;
                                                                                        rif:args ( [ a rif:Var ;
                                                                                                    rif:varname "leftexpr" ] [ a rif:Var ;
                                                                                                    rif:varname "rightexpr" ] ) ;
                                                                                        rif:op [ a rif:Const ;
                                                                                                rif:constIRI "http://www.w3.org/2007/rif-builtin-function#make-list"^^xsd:anyURI ] ] ] ] ) ] ] ) ] ] ;
                        rif:vars ( [ a rif:Var ;
                                    rif:varname "rifequal" ] [ a rif:Var ;
                                    rif:varname "action" ] [ a rif:Var ;
                                    rif:varname "defrule" ] [ a rif:Var ;
                                    rif:varname "left" ] [ a rif:Var ;
                                    rif:varname "right" ] [ a rif:Var ;
                                    rif:varname "leftexpr" ] [ a rif:Var ;
                                    rif:varname "rightexpr" ] ) ] [ a rif:Forall ;
                        rif:formula [ a rif:Implies ;
                                rif:if [ a rif:And ;
                                        rif:formulas ( [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "rifframe" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://example.com/add-as-pattern"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "defrule" ] ] ) ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "rifframe" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://www.w3.org/2007/rif#object"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "frameobject" ] ] ) ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "rifframe" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://www.w3.org/2007/rif#slots"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "slotlist" ] ] ) ] [ a rif:External ;
                                                    rif:content [ a rif:Atom ;
                                                            rif:args ( [ a rif:Var ;
                                                                        rif:varname "slotlist" ] ) ;
                                                            rif:op [ a rif:Const ;
                                                                    rif:constIRI "http://www.w3.org/2007/rif-builtin-predicate#is-list"^^xsd:anyURI ] ] ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "slot" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://www.w3.org/2007/rif#slotkey"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "slotkey" ] ] ) ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "slot" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://www.w3.org/2007/rif#slotvalue"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "slotvalue" ] ] ) ] [ a rif:External ;
                                                    rif:content [ a rif:Atom ;
                                                            rif:args ( [ a rif:Var ;
                                                                        rif:varname "slotlist" ] [ a rif:Var ;
                                                                        rif:varname "slot" ] ) ;
                                                            rif:op [ a rif:Const ;
                                                                    rif:constIRI "http://www.w3.org/2007/rif-builtin-predicate#list-contains"^^xsd:anyURI ] ] ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "frameobject" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://example.com/as-constraint"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "constraintsubject" ] ] ) ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "slotkey" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://example.com/as-constraint"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "constraintpredicate" ] ] ) ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "slotvalue" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://example.com/as-constraint"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "constraintobject" ] ] ) ] [ a rif:INeg ;
                                                    rif:formula [ a rif:Exists ;
                                                            rif:formula [ a rif:Frame ;
                                                                    rif:object [ a rif:Var ;
                                                                            rif:varname "constraintsubject" ] ;
                                                                    rif:slots ( [ a rif:Slot ;
                                                                                rif:slotkey [ a rif:Const ;
                                                                                        rif:constIRI "http://example.com/needs-variable"^^xsd:anyURI ] ;
                                                                                rif:slotvalue [ a rif:Var ;
                                                                                        rif:varname "x" ] ] ) ] ;
                                                            rif:vars ( [ a rif:Var ;
                                                                        rif:varname "x" ] ) ] ] [ a rif:INeg ;
                                                    rif:formula [ a rif:Exists ;
                                                            rif:formula [ a rif:Frame ;
                                                                    rif:object [ a rif:Var ;
                                                                            rif:varname "constraintpredicate" ] ;
                                                                    rif:slots ( [ a rif:Slot ;
                                                                                rif:slotkey [ a rif:Const ;
                                                                                        rif:constIRI "http://example.com/needs-variable"^^xsd:anyURI ] ;
                                                                                rif:slotvalue [ a rif:Var ;
                                                                                        rif:varname "y" ] ] ) ] ;
                                                            rif:vars ( [ a rif:Var ;
                                                                        rif:varname "y" ] ) ] ] [ a rif:INeg ;
                                                    rif:formula [ a rif:Exists ;
                                                            rif:formula [ a rif:Frame ;
                                                                    rif:object [ a rif:Var ;
                                                                            rif:varname "constraintobject" ] ;
                                                                    rif:slots ( [ a rif:Slot ;
                                                                                rif:slotkey [ a rif:Const ;
                                                                                        rif:constIRI "http://example.com/needs-variable"^^xsd:anyURI ] ;
                                                                                rif:slotvalue [ a rif:Var ;
                                                                                        rif:varname "z" ] ] ) ] ;
                                                            rif:vars ( [ a rif:Var ;
                                                                        rif:varname "z" ] ) ] ] ) ] ;
                                rif:then [ a rif:Do ;
                                        rif:actionVar ( [ a rif:Var ;
                                                    rif:varname "slotpredicate" ] [ a rif:New ] ),
                                            ( [ a rif:Var ;
                                                    rif:varname "oldpatternlist" ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "defrule" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://clips.script/conditional-element"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "oldpatternlist" ] ] ) ] ),
                                            ( [ a rif:Var ;
                                                    rif:varname "slotsubject" ] [ a rif:New ] ),
                                            ( [ a rif:Var ;
                                                    rif:varname "slotobject" ] [ a rif:New ] ),
                                            ( [ a rif:Var ;
                                                    rif:varname "pattern" ] [ a rif:New ] ) ;
                                        rif:actions ( [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "pattern" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/TemplatePatternCE"^^xsd:anyURI ] ] ) ] ] [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "pattern" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/deftemplate-name"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Const ;
                                                                                rif:value "TripleTemplate"^^xsd:string ] ] ) ] ] [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "pattern" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/slot"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:External ;
                                                                                rif:content [ a rif:Expr ;
                                                                                        rif:args ( [ a rif:Var ;
                                                                                                    rif:varname "slotsubject" ] [ a rif:Var ;
                                                                                                    rif:varname "slotpredicate" ] [ a rif:Var ;
                                                                                                    rif:varname "slotobject" ] ) ;
                                                                                        rif:op [ a rif:Const ;
                                                                                                rif:constIRI "http://www.w3.org/2007/rif-builtin-function#make-list"^^xsd:anyURI ] ] ] ] ) ] ] [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "slotsubject" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/slot-name"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Const ;
                                                                                rif:value "subject"^^xsd:string ] ] ) ] ] [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "slotsubject" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/constraint"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Var ;
                                                                                rif:varname "constraintsubject" ] ] ) ] ] [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "slotpredicate" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/slot-name"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Const ;
                                                                                rif:value "predicate"^^xsd:string ] ] ) ] ] [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "slotpredicate" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/constraint"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Var ;
                                                                                rif:varname "constraintpredicate" ] ] ) ] ] [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "slotobject" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/slot-name"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Const ;
                                                                                rif:value "object"^^xsd:string ] ] ) ] ] [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "slotobject" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/constraint"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Var ;
                                                                                rif:varname "constraintobject" ] ] ) ] ] [ a rif:Modify ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "defrule" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/conditional-element"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:External ;
                                                                                rif:content [ a rif:Expr ;
                                                                                        rif:args ( [ a rif:Var ;
                                                                                                    rif:varname "oldpatternlist" ] [ a rif:Var ;
                                                                                                    rif:varname "pattern" ] ) ;
                                                                                        rif:op [ a rif:Const ;
                                                                                                rif:constIRI "http://www.w3.org/2007/rif-builtin-function#append"^^xsd:anyURI ] ] ] ] ) ] ] [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "defrule" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://example.com/transfer-bound-variables-from"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Var ;
                                                                                rif:varname "constraintsubject" ] ] ) ] ] [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "defrule" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://example.com/transfer-bound-variables-from"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Var ;
                                                                                rif:varname "constraintpredicate" ] ] ) ] ] [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "defrule" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://example.com/transfer-bound-variables-from"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Var ;
                                                                                rif:varname "constraintobject" ] ] ) ] ] ) ] ] ;
                        rif:vars ( [ a rif:Var ;
                                    rif:varname "rifframe" ] [ a rif:Var ;
                                    rif:varname "slot" ] [ a rif:Var ;
                                    rif:varname "defrule" ] [ a rif:Var ;
                                    rif:varname "slotkey" ] [ a rif:Var ;
                                    rif:varname "slotvalue" ] ) ] ) ] .

