@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rif: <http://www.w3.org/2007/rif#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

<http://example.com/transform-retract-frame> a rif:Forall ;
    rif:formula [ a rif:Implies ;
            rif:if [ a rif:And ;
                    rif:formulas ( [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "rifretract" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Const ;
                                                    rif:constIRI "http://www.w3.org/2007/rif#Retract"^^xsd:anyURI ] ] ) ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "rifretract" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://www.w3.org/2007/rif#target"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "riftarget" ] ] ) ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "riftarget" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Const ;
                                                    rif:constIRI "http://www.w3.org/2007/rif#Frame"^^xsd:anyURI ] ] ) ] ) ] ;
            rif:then [ a rif:Do ;
                    rif:actionVar ( [ a rif:Var ;
                                rif:varname "clipsexpand" ] [ a rif:New ] ),
                        ( [ a rif:Var ;
                                rif:varname "clipsretract" ] [ a rif:New ] ) ;
                    rif:actions ( [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "rifretract" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/as-action"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:External ;
                                                            rif:content [ a rif:Expr ;
                                                                    rif:args ( [ a rif:Var ;
                                                                                rif:varname "clipsretract" ] ) ;
                                                                    rif:op [ a rif:Const ;
                                                                            rif:constIRI "http://www.w3.org/2007/rif-builtin-function#make-list"^^xsd:anyURI ] ] ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "clipsretract" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/function-name"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Const ;
                                                            rif:value "retract"^^xsd:string ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "clipsretract" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/function-args"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:External ;
                                                            rif:content [ a rif:Expr ;
                                                                    rif:args ( [ a rif:Var ;
                                                                                rif:varname "clipsexpand" ] ) ;
                                                                    rif:op [ a rif:Const ;
                                                                            rif:constIRI "http://www.w3.org/2007/rif-builtin-function#make-list"^^xsd:anyURI ] ] ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "clipsexpand" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/function-name"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Const ;
                                                            rif:value "expand$"^^xsd:string ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "clipsexpand" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/function-args"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:External ;
                                                            rif:content [ a rif:Expr ;
                                                                    rif:args () ;
                                                                    rif:op [ a rif:Const ;
                                                                            rif:constIRI "http://www.w3.org/2007/rif-builtin-function#make-list"^^xsd:anyURI ] ] ] ] ) ] ] ) ] ] ;
    rif:vars ( [ a rif:Var ;
                rif:varname "rifretract" ] [ a rif:Var ;
                rif:varname "riftarget" ] ) .

<http://example.com/transform-retract-var> a rif:Forall ;
    rif:formula [ a rif:Implies ;
            rif:if [ a rif:And ;
                    rif:formulas ( [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "rifretract" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Const ;
                                                    rif:constIRI "http://www.w3.org/2007/rif#Retract"^^xsd:anyURI ] ] ) ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "rifretract" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://www.w3.org/2007/rif#target"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "riftarget" ] ] ) ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "riftarget" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/as-expression"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "subj" ] ] ) ] ) ] ;
            rif:then [ a rif:Do ;
                    rif:actionVar ( [ a rif:Var ;
                                rif:varname "clipsdeftemplate" ] [ a rif:New ] ),
                        ( [ a rif:Var ;
                                rif:varname "clipsfindfacts" ] [ a rif:New ] ),
                        ( [ a rif:Var ;
                                rif:varname "factvariable" ] [ a rif:New ] ),
                        ( [ a rif:Var ;
                                rif:varname "clipsexpand" ] [ a rif:New ] ),
                        ( [ a rif:Var ;
                                rif:varname "clipsretract" ] [ a rif:New ] ),
                        ( [ a rif:Var ;
                                rif:varname "slotsubj" ] [ a rif:New ] ),
                        ( [ a rif:Var ;
                                rif:varname "factquery" ] [ a rif:New ] ) ;
                    rif:actions ( [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "rifretract" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/as-action"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:External ;
                                                            rif:content [ a rif:Expr ;
                                                                    rif:args ( [ a rif:Var ;
                                                                                rif:varname "clipsretract" ] ) ;
                                                                    rif:op [ a rif:Const ;
                                                                            rif:constIRI "http://www.w3.org/2007/rif-builtin-function#make-list"^^xsd:anyURI ] ] ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "clipsretract" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/function-name"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Const ;
                                                            rif:value "retract"^^xsd:string ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "clipsretract" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/function-args"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:External ;
                                                            rif:content [ a rif:Expr ;
                                                                    rif:args ( [ a rif:Var ;
                                                                                rif:varname "clipsexpand" ] ) ;
                                                                    rif:op [ a rif:Const ;
                                                                            rif:constIRI "http://www.w3.org/2007/rif-builtin-function#make-list"^^xsd:anyURI ] ] ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "clipsexpand" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/function-name"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Const ;
                                                            rif:value "expand$"^^xsd:string ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "clipsexpand" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/function-args"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:External ;
                                                            rif:content [ a rif:Expr ;
                                                                    rif:args ( [ a rif:Var ;
                                                                                rif:varname "clipsfindfacts" ] ) ;
                                                                    rif:op [ a rif:Const ;
                                                                            rif:constIRI "http://www.w3.org/2007/rif-builtin-function#make-list"^^xsd:anyURI ] ] ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "clipsfindfacts" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/FindAllFacts"^^xsd:anyURI ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "clipsfindfacts" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/fact-set-template"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Var ;
                                                            rif:varname "clipsdeftemplate" ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "clipsdeftemplate" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/deftemplate-name"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Const ;
                                                            rif:value "TripleTemplate"^^xsd:string ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "clipsdeftemplate" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/fact-set-member-variable"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Var ;
                                                            rif:varname "factvariable" ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "clipsfindfacts" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/query"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Var ;
                                                            rif:varname "factquery" ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "factvariable" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/variable-name"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Const ;
                                                            rif:value "fct"^^xsd:string ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "factquery" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/function-name"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Const ;
                                                            rif:value "eq"^^xsd:string ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "factquery" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/function-args"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:External ;
                                                            rif:content [ a rif:Expr ;
                                                                    rif:args ( [ a rif:Var ;
                                                                                rif:varname "slotsubj" ] [ a rif:Var ;
                                                                                rif:varname "subj" ] ) ;
                                                                    rif:op [ a rif:Const ;
                                                                            rif:constIRI "http://www.w3.org/2007/rif-builtin-function#make-list"^^xsd:anyURI ] ] ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "slotsubj" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/member-variable"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Var ;
                                                            rif:varname "factvariable" ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "slotsubj" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/member-slot-name"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Const ;
                                                            rif:value "subject"^^xsd:string ] ] ) ] ] ) ] ] ;
    rif:vars ( [ a rif:Var ;
                rif:varname "rifretract" ] [ a rif:Var ;
                rif:varname "riftarget" ] [ a rif:Var ;
                rif:varname "subj" ] ) .

[] a rif:Document ;
    rif:payload [ a rif:Group ;
            rif:sentences ( <http://example.com/transform-retract-var> <http://example.com/transform-retract-frame> ) ] .

