@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rif: <http://www.w3.org/2007/rif#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

<http://example.com/add-fact-to-deffacts> a rif:Forall ;
    rif:formula [ a rif:Implies ;
            rif:if [ a rif:And ;
                    rif:formulas ( [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "group" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://www.w3.org/2007/rif#sentences"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "sentences" ] ] ) ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "group" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/combine-deffacts-in"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "deffacts" ] ] ) ] [ a rif:Or ;
                                rif:formulas ( [ a rif:Frame ;
                                            rif:object [ a rif:Var ;
                                                    rif:varname "factable" ] ;
                                            rif:slots ( [ a rif:Slot ;
                                                        rif:slotkey [ a rif:Const ;
                                                                rif:constIRI "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"^^xsd:anyURI ] ;
                                                        rif:slotvalue [ a rif:Const ;
                                                                rif:constIRI "http://www.w3.org/2007/rif#Frame"^^xsd:anyURI ] ] ) ] [ a rif:Frame ;
                                            rif:object [ a rif:Var ;
                                                    rif:varname "factable" ] ;
                                            rif:slots ( [ a rif:Slot ;
                                                        rif:slotkey [ a rif:Const ;
                                                                rif:constIRI "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"^^xsd:anyURI ] ;
                                                        rif:slotvalue [ a rif:Const ;
                                                                rif:constIRI "http://www.w3.org/2007/rif#Member"^^xsd:anyURI ] ] ) ] [ a rif:Frame ;
                                            rif:object [ a rif:Var ;
                                                    rif:varname "factable" ] ;
                                            rif:slots ( [ a rif:Slot ;
                                                        rif:slotkey [ a rif:Const ;
                                                                rif:constIRI "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"^^xsd:anyURI ] ;
                                                        rif:slotvalue [ a rif:Const ;
                                                                rif:constIRI "http://www.w3.org/2007/rif#Atom"^^xsd:anyURI ] ] ) ] ) ] [ a rif:External ;
                                rif:content [ a rif:Atom ;
                                        rif:args ( [ a rif:Var ;
                                                    rif:varname "sentences" ] ) ;
                                        rif:op [ a rif:Const ;
                                                rif:constIRI "http://www.w3.org/2007/rif-builtin-predicate#is-list"^^xsd:anyURI ] ] ] [ a rif:External ;
                                rif:content [ a rif:Atom ;
                                        rif:args ( [ a rif:Var ;
                                                    rif:varname "sentences" ] [ a rif:Var ;
                                                    rif:varname "factable" ] ) ;
                                        rif:op [ a rif:Const ;
                                                rif:constIRI "http://www.w3.org/2007/rif-builtin-predicate#list-contains"^^xsd:anyURI ] ] ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "factable" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/as-rhspattern"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "newrhspattern" ] ] ) ] ) ] ;
            rif:then [ a rif:Do ;
                    rif:actionVar ( [ a rif:Var ;
                                rif:varname "rhspatternlist" ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "deffacts" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://clips.script/rhs-pattern"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "rhspatternlist" ] ] ) ] ) ;
                    rif:actions ( [ a rif:Modify ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "deffacts" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/rhs-pattern"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:External ;
                                                            rif:content [ a rif:Expr ;
                                                                    rif:args ( [ a rif:Var ;
                                                                                rif:varname "rhspatternlist" ] [ a rif:Var ;
                                                                                rif:varname "newrhspattern" ] ) ;
                                                                    rif:op [ a rif:Const ;
                                                                            rif:constIRI "http://www.w3.org/2007/rif-builtin-function#append"^^xsd:anyURI ] ] ] ] ) ] ] ) ] ] ;
    rif:vars ( [ a rif:Var ;
                rif:varname "group" ] [ a rif:Var ;
                rif:varname "deffacts" ] [ a rif:Var ;
                rif:varname "factable" ] [ a rif:Var ;
                rif:varname "newrhspattern" ] ) .

<http://example.com/add-formula-as-pattern-to-list> a rif:Forall ;
    rif:formula [ a rif:Implies ;
            rif:if [ a rif:And ;
                    rif:formulas ( [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "defrule" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/uses-patterns-as-conditional"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "rifrule" ] ] ) ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "rifrule" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://www.w3.org/2007/rif#pattern"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "pattern" ] ] ) ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "pattern" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/as-conditional"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "patternconditions" ] ] ) ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "pattern" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/unbound-variables"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "neededboundvars" ] ] ) ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "pattern" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/binds-variables"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "newsuppliedboundvars" ] ] ) ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "defrule" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/bound-variables"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "suppliedboundvars" ] ] ) ] [ a rif:Equal ;
                                rif:left [ a rif:List ;
                                        rif:items () ] ;
                                rif:right [ a rif:External ;
                                        rif:content [ a rif:Expr ;
                                                rif:args ( [ a rif:Var ;
                                                            rif:varname "neededboundvars" ] [ a rif:Var ;
                                                            rif:varname "suppliedboundvars" ] ) ;
                                                rif:op [ a rif:Const ;
                                                        rif:constIRI "http://www.w3.org/2007/rif-builtin-function#except"^^xsd:anyURI ] ] ] ] [ a rif:INeg ;
                                rif:formula [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "defrule" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/added-pattern"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Var ;
                                                            rif:varname "pattern" ] ] ) ] ] ) ] ;
            rif:then [ a rif:Do ;
                    rif:actionVar ( [ a rif:Var ;
                                rif:varname "currentconditions" ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "defrule" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/out-as-conditional"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "currentconditions" ] ] ) ] ) ;
                    rif:actions ( [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "defrule" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/implemented-pattern"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Var ;
                                                            rif:varname "pattern" ] ] ) ] ] [ a rif:Modify ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "defrule" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/out-as-conditional"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:External ;
                                                            rif:content [ a rif:Expr ;
                                                                    rif:args ( [ a rif:Var ;
                                                                                rif:varname "currentconditions" ] [ a rif:Var ;
                                                                                rif:varname "patternconditions" ] ) ;
                                                                    rif:op [ a rif:Const ;
                                                                            rif:constIRI "http://www.w3.org/2007/rif-builtin-function#concatenate"^^xsd:anyURI ] ] ] ] ) ] ] [ a rif:Modify ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "defrule" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/bound-variables"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:External ;
                                                            rif:content [ a rif:Expr ;
                                                                    rif:args ( [ a rif:Var ;
                                                                                rif:varname "suppliedboundvars" ] [ a rif:Var ;
                                                                                rif:varname "suppliedboundvars" ] ) ;
                                                                    rif:op [ a rif:Const ;
                                                                            rif:constIRI "http://www.w3.org/2007/rif-builtin-function#union"^^xsd:anyURI ] ] ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "defrule" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/added-pattern"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Var ;
                                                            rif:varname "pattern" ] ] ) ] ] ) ] ] ;
    rif:vars ( [ a rif:Var ;
                rif:varname "rule" ] [ a rif:Var ;
                rif:varname "pattern" ] [ a rif:Var ;
                rif:varname "defrule" ] [ a rif:Var ;
                rif:varname "defruleconditionlist" ] ) .

<http://example.com/add-slot-transform-rif-frame> a rif:Forall ;
    rif:formula [ a rif:Implies ;
            rif:if [ a rif:And ;
                    rif:formulas ( [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "rifnode" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Const ;
                                                    rif:constIRI "http://www.w3.org/2007/rif#Frame"^^xsd:anyURI ] ] ) ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "rifnode" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://www.w3.org/2007/rif#object"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "object" ] ] ) ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "object" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/as-constraint"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "constraintsubject" ] ] ) ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "rifnode" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://www.w3.org/2007/rif#slots"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "slotlist" ] ] ) ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "slot" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://www.w3.org/2007/rif#slotkey"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "slotkey" ] ] ) ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "slotkey" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/as-constraint"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "constraintpredicate" ] ] ) ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "slot" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://www.w3.org/2007/rif#slotvalue"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "slotvalue" ] ] ) ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "slotvalue" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/as-constraint"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "constraintobject" ] ] ) ] [ a rif:External ;
                                rif:content [ a rif:Atom ;
                                        rif:args ( [ a rif:Var ;
                                                    rif:varname "slotlist" ] ) ;
                                        rif:op [ a rif:Const ;
                                                rif:constIRI "http://www.w3.org/2007/rif-builtin-predicate#is-list"^^xsd:anyURI ] ] ] [ a rif:External ;
                                rif:content [ a rif:Atom ;
                                        rif:args ( [ a rif:Var ;
                                                    rif:varname "slotlist" ] [ a rif:Var ;
                                                    rif:varname "slot" ] ) ;
                                        rif:op [ a rif:Const ;
                                                rif:constIRI "http://www.w3.org/2007/rif-builtin-predicate#list-contains"^^xsd:anyURI ] ] ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "constraintsubject" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/as-constraint-needs-additional-conditionals"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "additionalconditionalssubject" ] ] ) ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "constraintpredicate" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/as-constraint-needs-additional-conditionals"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "additionalconditionalspredicate" ] ] ) ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "constraintobject" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/as-constraint-needs-additional-conditionals"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "additionalconditionalsobject" ] ] ) ] [ a rif:Member ;
                                rif:class [ a rif:Const ;
                                        rif:constIRI "http://example.com/construct-as-conditional"^^xsd:anyURI ] ;
                                rif:instance [ a rif:Var ;
                                        rif:varname "rifnode" ] ] [ a rif:INeg ;
                                rif:formula [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "rifnode" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/used-slot-for-conditional"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Var ;
                                                            rif:varname "slot" ] ] ) ] ] ) ] ;
            rif:then [ a rif:Do ;
                    rif:actionVar ( [ a rif:Var ;
                                rif:varname "clipsconditionalelement" ] [ a rif:New ] ),
                        ( [ a rif:Var ;
                                rif:varname "slotsubject" ] [ a rif:New ] ),
                        ( [ a rif:Var ;
                                rif:varname "existingconditionals" ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "rifnode" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/in-as-conditional"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "existingconditionals" ] ] ) ] ),
                        ( [ a rif:Var ;
                                rif:varname "slotobject" ] [ a rif:New ] ),
                        ( [ a rif:Var ;
                                rif:varname "slotpredicate" ] [ a rif:New ] ) ;
                    rif:actions ( [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "rifnode" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/used-slot-for-conditional"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Var ;
                                                            rif:varname "slot" ] ] ) ] ] [ a rif:Modify ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "rifnode" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/in-as-conditional"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:External ;
                                                            rif:content [ a rif:Expr ;
                                                                    rif:args ( [ a rif:Var ;
                                                                                rif:varname "existingconditionals" ] [ a rif:Var ;
                                                                                rif:varname "additionalconditionalssubject" ] [ a rif:Var ;
                                                                                rif:varname "additionalconditionalspredicate" ] [ a rif:Var ;
                                                                                rif:varname "additionalconditionalsobject" ] [ a rif:External ;
                                                                                rif:content [ a rif:Expr ;
                                                                                        rif:args ( [ a rif:Var ;
                                                                                                    rif:varname "clipsconditionalelement" ] ) ;
                                                                                        rif:op [ a rif:Const ;
                                                                                                rif:constIRI "http://www.w3.org/2007/rif-builtin-function#make-list"^^xsd:anyURI ] ] ] ) ;
                                                                    rif:op [ a rif:Const ;
                                                                            rif:constIRI "http://www.w3.org/2007/rif-builtin-function#concatenate"^^xsd:anyURI ] ] ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "rifnode" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/binds-variables"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:List ;
                                                            rif:items () ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "rifnode" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/unbound-variables"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:List ;
                                                            rif:items () ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "clipsconditionalelement" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/TemplatePatternCE"^^xsd:anyURI ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "clipsconditionalelement" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/deftemplate-name"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Const ;
                                                            rif:value "TripleTemplate"^^xsd:string ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "clipsconditionalelement" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/slot"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:External ;
                                                            rif:content [ a rif:Expr ;
                                                                    rif:args ( [ a rif:Var ;
                                                                                rif:varname "slotsubject" ] [ a rif:Var ;
                                                                                rif:varname "slotpredicate" ] [ a rif:Var ;
                                                                                rif:varname "slotobject" ] ) ;
                                                                    rif:op [ a rif:Const ;
                                                                            rif:constIRI "http://www.w3.org/2007/rif-builtin-function#make-list"^^xsd:anyURI ] ] ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "slotsubject" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/slot-name"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Const ;
                                                            rif:value "subject"^^xsd:string ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "slotsubject" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/constraint"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Var ;
                                                            rif:varname "constraintsubject" ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "slotpredicate" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/slot-name"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Const ;
                                                            rif:value "predicate"^^xsd:string ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "slotpredicate" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/constraint"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Var ;
                                                            rif:varname "constraintpredicate" ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "slotobject" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/slot-name"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Const ;
                                                            rif:value "object"^^xsd:string ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "slotobject" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/constraint"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Var ;
                                                            rif:varname "constraintobject" ] ] ) ] ] ) ] ] ;
    rif:vars ( [ a rif:Var ;
                rif:varname "rifnode" ] [ a rif:Var ;
                rif:varname "slotlist" ] [ a rif:Var ;
                rif:varname "slot" ] [ a rif:Var ;
                rif:varname "currentconditionalelement" ] [ a rif:Var ;
                rif:varname "clipsrestraint" ] [ a rif:Var ;
                rif:varname "slotvalue" ] [ a rif:Var ;
                rif:varname "slotkey" ] [ a rif:Var ;
                rif:varname "constraintsubject" ] ) .

<http://example.com/combine-formulas-to-pattern> a rif:Group ;
    rif:sentences ( [ a rif:Group ;
                rif:behavior [ rif:Priority 20 ] ;
                rif:sentences ( <http://example.com/add-formula-as-pattern-to-list> ) ] [ a rif:Group ;
                rif:behavior [ rif:Priority 3 ] ;
                rif:sentences ( <http://example.com/complete-pattern-to-conditional> ) ] ) .

<http://example.com/complete-pattern-to-conditional> a rif:Forall ;
    rif:formula [ a rif:Implies ;
            rif:if [ a rif:And ;
                    rif:formulas ( [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "defrule" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/uses-patterns-as-conditional"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "rifrule" ] ] ) ] [ a rif:INeg ;
                                rif:formula [ a rif:Exists ;
                                        rif:formula [ a rif:And ;
                                                rif:formulas ( [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "rifrule" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://www.w3.org/2007/rif#pattern"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Var ;
                                                                                rif:varname "pattern" ] ] ) ] [ a rif:INeg ;
                                                            rif:formula [ a rif:Frame ;
                                                                    rif:object [ a rif:Var ;
                                                                            rif:varname "defrule" ] ;
                                                                    rif:slots ( [ a rif:Slot ;
                                                                                rif:slotkey [ a rif:Const ;
                                                                                        rif:constIRI "http://example.com/added-pattern"^^xsd:anyURI ] ;
                                                                                rif:slotvalue [ a rif:Var ;
                                                                                        rif:varname "pattern" ] ] ) ] ] ) ] ;
                                        rif:vars ( [ a rif:Var ;
                                                    rif:varname "pattern" ] ) ] ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "defrule" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/out-as-conditional"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "conditional" ] ] ) ] ) ] ;
            rif:then [ a rif:Do ;
                    rif:actions ( [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "defrule" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/conditional-element"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Var ;
                                                            rif:varname "conditional" ] ] ) ] ] ) ] ] ;
    rif:vars ( [ a rif:Var ;
                rif:varname "defrule" ] [ a rif:Var ;
                rif:varname "conditional" ] [ a rif:Var ;
                rif:varname "rifrule" ] ) .

<http://example.com/create-deffacts-for-groups> a rif:Group ;
    rif:sentences ( <http://example.com/init-deffacts> <http://example.com/add-fact-to-deffacts> ) .

<http://example.com/end-transform-do> a rif:Forall ;
    rif:formula [ a rif:Implies ;
            rif:if [ a rif:And ;
                    rif:formulas ( [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "rifnode" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/in-transform-do"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "in" ] ] ) ] [ a rif:Equal ;
                                rif:left [ a rif:Const ;
                                        rif:value 0 ] ;
                                rif:right [ a rif:External ;
                                        rif:content [ a rif:Expr ;
                                                rif:args ( [ a rif:Var ;
                                                            rif:varname "in" ] ) ;
                                                rif:op [ a rif:Const ;
                                                        rif:constIRI "http://www.w3.org/2007/rif-builtin-function#count"^^xsd:anyURI ] ] ] ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "rifnode" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/out-transform-do"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "out" ] ] ) ] ) ] ;
            rif:then [ a rif:Do ;
                    rif:actions ( [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "rifnode" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/as-action"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Var ;
                                                            rif:varname "out" ] ] ) ] ] [ a rif:Retract ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "rifnode" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/in-transform-do"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Var ;
                                                            rif:varname "in" ] ] ) ] ] [ a rif:Retract ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "rifnode" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/out-transform-do"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Var ;
                                                            rif:varname "out" ] ] ) ] ] ) ] ] ;
    rif:vars ( [ a rif:Var ;
                rif:varname "rifnode" ] [ a rif:Var ;
                rif:varname "in" ] [ a rif:Var ;
                rif:varname "out" ] ) .

<http://example.com/init-deffacts> a rif:Forall ;
    rif:formula [ a rif:Implies ;
            rif:if [ a rif:And ;
                    rif:formulas ( [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "group" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://www.w3.org/2007/rif#sentences"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "sentences" ] ] ) ] [ a rif:External ;
                                rif:content [ a rif:Atom ;
                                        rif:args ( [ a rif:Var ;
                                                    rif:varname "sentences" ] ) ;
                                        rif:op [ a rif:Const ;
                                                rif:constIRI "http://www.w3.org/2007/rif-builtin-predicate#is-list"^^xsd:anyURI ] ] ] [ a rif:Exists ;
                                rif:formula [ a rif:And ;
                                        rif:formulas ( [ a rif:Or ;
                                                    rif:formulas ( [ a rif:Frame ;
                                                                rif:object [ a rif:Var ;
                                                                        rif:varname "factable" ] ;
                                                                rif:slots ( [ a rif:Slot ;
                                                                            rif:slotkey [ a rif:Const ;
                                                                                    rif:constIRI "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"^^xsd:anyURI ] ;
                                                                            rif:slotvalue [ a rif:Const ;
                                                                                    rif:constIRI "http://www.w3.org/2007/rif#Frame"^^xsd:anyURI ] ] ) ] [ a rif:Frame ;
                                                                rif:object [ a rif:Var ;
                                                                        rif:varname "factable" ] ;
                                                                rif:slots ( [ a rif:Slot ;
                                                                            rif:slotkey [ a rif:Const ;
                                                                                    rif:constIRI "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"^^xsd:anyURI ] ;
                                                                            rif:slotvalue [ a rif:Const ;
                                                                                    rif:constIRI "http://www.w3.org/2007/rif#Member"^^xsd:anyURI ] ] ) ] [ a rif:Frame ;
                                                                rif:object [ a rif:Var ;
                                                                        rif:varname "factable" ] ;
                                                                rif:slots ( [ a rif:Slot ;
                                                                            rif:slotkey [ a rif:Const ;
                                                                                    rif:constIRI "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"^^xsd:anyURI ] ;
                                                                            rif:slotvalue [ a rif:Const ;
                                                                                    rif:constIRI "http://www.w3.org/2007/rif#Atom"^^xsd:anyURI ] ] ) ] ) ] [ a rif:External ;
                                                    rif:content [ a rif:Atom ;
                                                            rif:args ( [ a rif:Var ;
                                                                        rif:varname "sentences" ] [ a rif:Var ;
                                                                        rif:varname "factable" ] ) ;
                                                            rif:op [ a rif:Const ;
                                                                    rif:constIRI "http://www.w3.org/2007/rif-builtin-predicate#list-contains"^^xsd:anyURI ] ] ] ) ] ;
                                rif:vars ( [ a rif:Var ;
                                            rif:varname "factable" ] ) ] ) ] ;
            rif:then [ a rif:Do ;
                    rif:actionVar ( [ a rif:Var ;
                                rif:varname "deffacts" ] [ a rif:New ] ) ;
                    rif:actions ( [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "group" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/combine-deffacts-in"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Var ;
                                                            rif:varname "deffacts" ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "deffacts" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/Deffacts"^^xsd:anyURI ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "deffacts" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://clips.script/rhs-pattern"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:External ;
                                                            rif:content [ a rif:Expr ;
                                                                    rif:args () ;
                                                                    rif:op [ a rif:Const ;
                                                                            rif:constIRI "http://www.w3.org/2007/rif-builtin-function#make-list"^^xsd:anyURI ] ] ] ] ) ] ] ) ] ] ;
    rif:vars ( [ a rif:Var ;
                rif:varname "group" ] ) .

<http://example.com/init-transform-do> a rif:Forall ;
    rif:formula [ a rif:Implies ;
            rif:if [ a rif:And ;
                    rif:formulas ( [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "rifnode" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://www.w3.org/2007/rif#actions"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "actionlist" ] ] ) ] [ a rif:External ;
                                rif:content [ a rif:Atom ;
                                        rif:args ( [ a rif:Var ;
                                                    rif:varname "actionlist" ] ) ;
                                        rif:op [ a rif:Const ;
                                                rif:constIRI "http://www.w3.org/2007/rif-builtin-predicate#is-list"^^xsd:anyURI ] ] ] ) ] ;
            rif:then [ a rif:Do ;
                    rif:actions ( [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "rifnode" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/in-transform-do"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Var ;
                                                            rif:varname "actionlist" ] ] ) ] ] [ a rif:Assert ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "rifnode" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/out-transform-do"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:External ;
                                                            rif:content [ a rif:Expr ;
                                                                    rif:args () ;
                                                                    rif:op [ a rif:Const ;
                                                                            rif:constIRI "http://www.w3.org/2007/rif-builtin-function#make-list"^^xsd:anyURI ] ] ] ] ) ] ] ) ] ] ;
    rif:vars ( [ a rif:Var ;
                rif:varname "rifnode" ] [ a rif:Var ;
                rif:varname "actionlist" ] ) .

<http://example.com/iter-transform-do> a rif:Forall ;
    rif:formula [ a rif:Implies ;
            rif:if [ a rif:And ;
                    rif:formulas ( [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "rifnode" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/in-transform-do"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "in" ] ] ) ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "rifnode" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/out-transform-do"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "out" ] ] ) ] [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "firstaction" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/as-action"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "nextactions" ] ] ) ] [ a rif:External ;
                                rif:content [ a rif:Atom ;
                                        rif:args ( [ a rif:Const ;
                                                    rif:value 0 ] [ a rif:External ;
                                                    rif:content [ a rif:Expr ;
                                                            rif:args ( [ a rif:Var ;
                                                                        rif:varname "in" ] ) ;
                                                            rif:op [ a rif:Const ;
                                                                    rif:constIRI "http://www.w3.org/2007/rif-builtin-function#count"^^xsd:anyURI ] ] ] ) ;
                                        rif:op [ a rif:Const ;
                                                rif:constIRI "http://www.w3.org/2007/rif-builtin-predicate#numeric-not-equal"^^xsd:anyURI ] ] ] [ a rif:Equal ;
                                rif:left [ a rif:Var ;
                                        rif:varname "firstaction" ] ;
                                rif:right [ a rif:External ;
                                        rif:content [ a rif:Expr ;
                                                rif:args ( [ a rif:Var ;
                                                            rif:varname "in" ] [ a rif:Const ;
                                                            rif:value 0 ] ) ;
                                                rif:op [ a rif:Const ;
                                                        rif:constIRI "http://www.w3.org/2007/rif-builtin-function#get"^^xsd:anyURI ] ] ] ] ) ] ;
            rif:then [ a rif:Do ;
                    rif:actions ( [ a rif:Modify ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "rifnode" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/in-transform-do"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:External ;
                                                            rif:content [ a rif:Expr ;
                                                                    rif:args ( [ a rif:Var ;
                                                                                rif:varname "in" ] [ a rif:Const ;
                                                                                rif:value 0 ] ) ;
                                                                    rif:op [ a rif:Const ;
                                                                            rif:constIRI "http://www.w3.org/2007/rif-builtin-function#remove"^^xsd:anyURI ] ] ] ] ) ] ] [ a rif:Modify ;
                                rif:target [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "rifnode" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/out-transform-do"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:External ;
                                                            rif:content [ a rif:Expr ;
                                                                    rif:args ( [ a rif:Var ;
                                                                                rif:varname "out" ] [ a rif:Var ;
                                                                                rif:varname "nextactions" ] ) ;
                                                                    rif:op [ a rif:Const ;
                                                                            rif:constIRI "http://www.w3.org/2007/rif-builtin-function#concatenate"^^xsd:anyURI ] ] ] ] ) ] ] ) ] ] ;
    rif:vars ( [ a rif:Var ;
                rif:varname "rifnode" ] [ a rif:Var ;
                rif:varname "in" ] [ a rif:Var ;
                rif:varname "out" ] [ a rif:Var ;
                rif:varname "nextactions" ] ) .

<http://example.com/transform-do> a rif:Group ;
    rif:sentences ( <http://example.com/init-transform-do> <http://example.com/end-transform-do> <http://example.com/iter-transform-do> ) .

[] a rif:Document ;
    rif:payload [ a rif:Group ;
            rif:sentences ( [ a rif:Forall ;
                        rif:formula [ a rif:Implies ;
                                rif:if [ a rif:And ;
                                        rif:formulas ( [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "frame" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Const ;
                                                                        rif:constIRI "http://www.w3.org/2007/rif#Frame"^^xsd:anyURI ] ] ) ] ) ] ;
                                rif:then [ a rif:Do ;
                                        rif:actions ( [ a rif:Assert ;
                                                    rif:target [ a rif:Member ;
                                                            rif:class [ a rif:Const ;
                                                                    rif:constIRI "http://example.com/construct-as-conditional"^^xsd:anyURI ] ;
                                                            rif:instance [ a rif:Var ;
                                                                    rif:varname "frame" ] ] ] [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "frame" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://example.com/in-as-conditional"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:External ;
                                                                                rif:content [ a rif:Expr ;
                                                                                        rif:args () ;
                                                                                        rif:op [ a rif:Const ;
                                                                                                rif:constIRI "http://www.w3.org/2007/rif-builtin-function#make-list"^^xsd:anyURI ] ] ] ] ) ] ] ) ] ] ;
                        rif:vars ( [ a rif:Var ;
                                    rif:varname "frame" ] ) ] [ a rif:Forall ;
                        rif:formula [ a rif:Implies ;
                                rif:if [ a rif:And ;
                                        rif:formulas ( [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "rifineg" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Const ;
                                                                        rif:constIRI "http://www.w3.org/2007/rif#INeg"^^xsd:anyURI ] ] ) ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "rifineg" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://www.w3.org/2007/rif#formula"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "formula" ] ] ) ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "formula" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://example.com/as-conditional"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "clipsconditional" ] ] ) ] ) ] ;
                                rif:then [ a rif:Do ;
                                        rif:actionVar ( [ a rif:Var ;
                                                    rif:varname "notCE" ] [ a rif:New ] ) ;
                                        rif:actions ( [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "rifineg" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://example.com/as-conditional"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:External ;
                                                                                rif:content [ a rif:Expr ;
                                                                                        rif:args ( [ a rif:Var ;
                                                                                                    rif:varname "notCE" ] ) ;
                                                                                        rif:op [ a rif:Const ;
                                                                                                rif:constIRI "http://www.w3.org/2007/rif-builtin-function#make-list"^^xsd:anyURI ] ] ] ] ) ] ] [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "notCE" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/NotCE"^^xsd:anyURI ] ] ) ] ] [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "notCE" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://clips.script/conditional-element"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Var ;
                                                                                rif:varname "clipsconditional" ] ] ) ] ] ) ] ] ;
                        rif:vars ( [ a rif:Var ;
                                    rif:varname "rifineg" ] [ a rif:Var ;
                                    rif:varname "formula" ] [ a rif:Var ;
                                    rif:varname "clipsconditional" ] ) ] [ a rif:Forall ;
                        rif:formula [ a rif:Implies ;
                                rif:if [ a rif:And ;
                                        rif:formulas ( [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "rifnode" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://www.w3.org/2007/rif#slots"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "slotlist" ] ] ) ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "rifnode" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://example.com/in-as-conditional"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "existingconditionals" ] ] ) ] [ a rif:INeg ;
                                                    rif:formula [ a rif:Exists ;
                                                            rif:formula [ a rif:And ;
                                                                    rif:formulas ( [ a rif:Frame ;
                                                                                rif:object [ a rif:Var ;
                                                                                        rif:varname "slot" ] ;
                                                                                rif:slots ( [ a rif:Slot ;
                                                                                            rif:slotkey [ a rif:Const ;
                                                                                                    rif:constIRI "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"^^xsd:anyURI ] ;
                                                                                            rif:slotvalue [ a rif:Const ;
                                                                                                    rif:constIRI "http://www.w3.org/2007/rif#Slot"^^xsd:anyURI ] ] ) ] [ a rif:External ;
                                                                                rif:content [ a rif:Atom ;
                                                                                        rif:args ( [ a rif:Var ;
                                                                                                    rif:varname "slotlist" ] [ a rif:Var ;
                                                                                                    rif:varname "slot" ] ) ;
                                                                                        rif:op [ a rif:Const ;
                                                                                                rif:constIRI "http://www.w3.org/2007/rif-builtin-predicate#list-contains"^^xsd:anyURI ] ] ] [ a rif:INeg ;
                                                                                rif:formula [ a rif:Frame ;
                                                                                        rif:object [ a rif:Var ;
                                                                                                rif:varname "rifnode" ] ;
                                                                                        rif:slots ( [ a rif:Slot ;
                                                                                                    rif:slotkey [ a rif:Const ;
                                                                                                            rif:constIRI "http://example.com/used-slot-for-conditional"^^xsd:anyURI ] ;
                                                                                                    rif:slotvalue [ a rif:Var ;
                                                                                                            rif:varname "slot" ] ] ) ] ] ) ] ;
                                                            rif:vars ( [ a rif:Var ;
                                                                        rif:varname "slot" ] ) ] ] ) ] ;
                                rif:then [ a rif:Do ;
                                        rif:actions ( [ a rif:Assert ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "rifnode" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://example.com/as-conditional"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Var ;
                                                                                rif:varname "existingconditionals" ] ] ) ] ] ) ] ] ;
                        rif:vars ( [ a rif:Var ;
                                    rif:varname "rifnode" ] [ a rif:Var ;
                                    rif:varname "slotlist" ] [ a rif:Var ;
                                    rif:varname "existingconditionals" ] ) ] <http://example.com/add-slot-transform-rif-frame> <http://example.com/transform-do> <http://example.com/create-deffacts-for-groups> <http://example.com/combine-formulas-to-pattern> ) ] .

